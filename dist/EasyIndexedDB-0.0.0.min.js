!function(){var a,b;!function(){var c={},d={};a=function(a,b,d){c[a]={deps:b,callback:d}},b=function(a){if(d[a])return d[a];d[a]={};var e=c[a];if(!e)throw new Error("Module '"+a+"' not found.");for(var f,g=e.deps,h=e.callback,i=[],j=0,k=g.length;k>j;j++)"exports"===g[j]?i.push(f={}):i.push(b(g[j]));var l=h.apply(this,i);return d[a]=f||l}}(),a("eidb/database",["eidb/indexed_db","eidb/object_store","eidb/transaction","eidb/error_handling","eidb/hook","exports"],function(a,b,c,d,e,f){"use strict";a.idbDatabase;var g=b.ObjectStore,h=c.Transaction,i=d._handleErrors,j=e.hook,k=function(a){this._idbDatabase=a,this.name=a.name,this.version=a.version,this.objectStoreNames=a.objectStoreNames,a.onabort=j.triggerHandler("database.onabort"),a.onerror=j.triggerHandler("database.onerror"),a.onversionchange=j.triggerHandler("database.onversionchange")};k.prototype={_idbDatabase:null,name:null,version:null,objectStoreNames:null,close:function(){return i(this,arguments,function(a){return a._idbDatabase.close()},{propogateError:!0})},createObjectStore:function(a,b){return i(this,arguments,function(c){return new g(c._idbDatabase.createObjectStore(a,b))})},deleteObjectStore:function(a){return i(this,arguments,function(b){return b._idbDatabase.deleteObjectStore(a)})},objectStore:function(a,b){return this.transactionFor(a,b).objectStore(a)},transaction:function(a,b,c){var d=i(this,arguments,function(c){return void 0!==b?c._idbDatabase.transaction(a,b):c._idbDatabase.transaction(a)},c);return new h(d)},_transactionsMap:null,transactionFor:function(a,b){var c=this;return this._transactionsMap||(this._transactionsMap={}),setTimeout(function(){c._transactionsMap={}},0),this._transactionsMap[a]=this._transactionsMap[a]||this.transaction([a],"readwrite",b)},add:function(a,b,c){var d=this.objectStore(a),e=d.keyPath;return c[e]=b,d.add(c).then(function(){return c})},get:function(a,b){var c=this.objectStore(a);return c.get(b)},put:function(a,b,c){var d=this.objectStore(a),e=d.keyPath;return c[e]=b,d.put(c)},"delete":function(a,b){return this.objectStore(a).delete(b)},hasObjectStore:function(a){return this.objectStoreNames.contains(a)}},f.Database=k}),a("eidb/eidb",["eidb/indexed_db","eidb/promise","eidb/database","eidb/utils","eidb/error_handling","eidb/hook","exports"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d){return new A(function(e,f){var g=(window.EIDB,b?z.open(a,b):z.open(a));g.onsuccess=function(){var a=new C(g.result);G("open.onsuccess.resolve",e,a),(!d||d&&!d.keepOpen)&&setTimeout(function(){a.close()},0)},g.onerror=function(a){f(a)},g.onupgradeneeded=function(a){var b=new C(g.result),e=d&&d.returnEvent?{db:b,event:a}:b;c&&G("open.onupgradeneeded.callback",c,e)}}).then(null,F(z,"open",[a,b,c,d]))}function i(){return E(z,"deleteDatabase",arguments)}function j(a){return m(a).then(function(a){return a?a.version:null})}function k(){return E(z,"webkitGetDatabaseNames")}function l(){return H?k():(D(!0,"EIDB.getDatabaseNames is currently only supported in Chrome"),B.resolve([]))}function m(a,b,c,d){return H?l().then(function(e){return e.contains(a)&&!b?h(a,b,c,d):e.contains(a)&&b?h(a).then(function(e){return e.version>=b?h(a,b,c,d):null}):null}):(D(!0,"EIDB.openOnly acts like .open in non-supported browsers"),h(a,b,c,d))}function n(a,b,c){return a?h(a).then(function(d){return h(a,d.version+1,function(e){if(b&&window.EIDB.ERROR_HANDLING)try{b(e)}catch(f){F(d,"bumpVersion",[a,b,c])(f)}else b&&b(e)},c)}):B.resolve(null)}function o(a,b,c){var d=c?c:{autoIncrement:!0};return n(a,function(a){a.createObjectStore(b,d)})}function p(a,b){return n(a,function(a){a.deleteObjectStore(b)})}function q(a,b,c,d,e){return n(a,function(a){var f=a.event.target.transaction.objectStore(b);f.createIndex(c,d,e)},{returnEvent:!0})}function r(a,b,c,d){var e;return h(a,null,null,d).then(function(a){e=a;var f=e.objectStore(b,d);return d&&d.keepOpen?c(f,e):c(f)}).then(null,F(e,"storeAction",[a,b,c,d]))}function s(a,b,c,d,e){return r(a,b,function(a,b){return c instanceof Array?B.all(c.map(function(c,f){return!a.keyPath&&d instanceof Array?a.insertWith_key(e,c,d[f],b):a.keyPath?(b.close(),a[e](c)):a.insertWith_key(e,c,null,b)})):a.keyPath?(b.close(),a[e](c,d)):a.insertWith_key(e,c,d,b)},{keepOpen:!0})}function t(a,b,c,d){return s(a,b,c,d,"add")}function u(a,b,c,d){return s(a,b,c,d,"put")}function v(a,b,c){return r(a,b,function(a){return a.get(c)})}function w(a,b,c){return r(a,b,function(a){return a.delete(c)})}function x(a,b,c,d){return r(a,b,function(a){return a.getAll(c,d)})}function y(a,b){return r(a,b,function(a){return a.getIndexes()})}var z=a.indexedDB,A=b.Promise,B=b.RSVP,C=c.Database,D=d._warn,E=d._request;d.__instrument__;var F=e._rsvpErrorHandler,G=f.hook,H=function(){return"webkitGetDatabaseNames"in z}();g.open=h,g._delete=i,g.openOnly=m,g.bumpVersion=n,g.version=j,g.webkitGetDatabaseNames=k,g.isGetDatabaseNamesSupported=H,g.getDatabaseNames=l,g.createObjectStore=o,g.deleteObjectStore=p,g.createIndex=q,g.addRecord=t,g.getRecord=v,g.putRecord=u,g.deleteRecord=w,g.getAll=x,g.getIndexes=y,g.storeAction=r}),a("eidb/error_handling",["eidb/promise","eidb/hook","exports"],function(a,b,c){"use strict";function d(a,b,c,d){var f=window.EIDB,g=f.ERROR_LOGGING;d&&d.propogateError||(f.error=null);try{return c(a)}catch(h){if(h.context=a,h.arguments=b,h.eidb_code=c,h._message=e(h),f.error=h,!f.ERROR_HANDLING)throw h;return!g||d&&d.stopErrors||console.error(h),d&&!d.stopErrors&&f.trigger("error",h),!1}}function e(a){var b=(window.EIDB,null);return a.message&&(b=a.message),a.target&&a.target.error&&a.target.error.message&&(b=a.target.error.message),b}function f(a,b,c){var d=window.EIDB,f=d.ERROR_LOGGING;return function(g){var h=new Error;if(h._name="EIDB request "+a+" #"+b+" error",h._idbObj=a,h._arguments=c,h._message=e(g),h.originalError=g,!d.ERROR_HANDLING)throw g;f&&console.error(g),d.error=g,d.trigger("error",g)}}function g(){window.EIDB.error=null}a.RSVP;var h=b.hook,i=!1,j=!0,k=null;["open.onsuccess.resolve.before","open.onupgradeneeded.callback.before","_request.onsuccess.resolve.before","_openCursor.onsuccess.resolve.before"].forEach(function(a){h.addHook(a,g)}),c.ERROR_HANDLING=i,c.ERROR_LOGGING=j,c.error=k,c._handleErrors=d,c._rsvpErrorHandler=f}),a("eidb/find",["eidb/eidb","eidb/error_handling","exports"],function(a,b,c){"use strict";function d(a,b){return function(){return k.bound(a.lower,b.upper,a.lowerOpen,b.upperOpen)}}function e(a,b){var c,e,f,g={},h={},i={};for(c in a)i[c]=a[c];for(c in b)e=a[c],f=b[c],e&&f?(h=e.lower>f.lower?e:f,g=e.upper<f.upper?e:f,i[c]=j(null,arguments,d(h,g))):i[c]=b[c];return i}function f(a){if(1===a.length)return a[0];var b={};return b[a[0]]=a[1],b}function g(a,b){return function(c){return c[a]===b?!1:!0}}function h(a,b,c){var d=new n(a,b);return c?d.equal(c).run():d}var i=a.storeAction;a._warn;var j=b._handleErrors,k=window.IDBKeyRange,l={eq:function(a){return k.only(a)},gt:function(a){var b=m.upper[typeof a];return k.bound(a,b,!0)},gte:function(a){var b=m.upper[typeof a];return k.bound(a,b)},lt:function(a){var b=m.lower[typeof a];return k.bound(b,a,!1,!0)},lte:function(a){var b=m.lower[typeof a];return k.bound(b,a)}},m={lower:{string:String.fromCharCode(0),number:-1/0},upper:{string:String.fromCharCode(65535),number:1/0}},n=function(a,b){this.dbName=a,this.storeName=b,this.filters=[],this.ranges={},this.rangeFilters=[]};n.prototype={storindex:null,_range:null,getOne:!1,cursorDirection:"next",_addRanges:function(a,b){var c={},d=f(b);for(var g in d)c[g]=l[a](d[g]);this.ranges=e(this.ranges,c)},eq:function(){return this._addRanges("eq",arguments),this},gt:function(){return this._addRanges("gt",arguments),this},gte:function(){return this._addRanges("gte",arguments),this},lt:function(){return this._addRanges("lt",arguments),this},lte:function(){return this._addRanges("lte",arguments),this},range:function(){var a=f(arguments),b=Object.keys(a)[0];return this.gte(b,a[b][0]),this.lte(b,a[b][1]),this},filter:function(a){return this.filters.push(a),this},match:function(a,b){return this.filter(function(c){return b.test(c[a])})},_isRangeNeeded:function(){return Object.keys(this.ranges).length>0},setStorindex:function(a,b){var c,d,e=this,f=Object.keys(this.ranges),g=1===f.length?f[0]:f;if(a.getIndexes().forEach(function(a){a.hasKeyPath(g)&&(c=a)},this),!c){if(this._isRangeNeeded()&&!a.hasKeyPath(g))return f.sort(),d=f.join("_"),g=1===f.length?f[0]:f,window.EIDB.createIndex(this.dbName,a.name,d,g).then(function(c){return e.storindex=c.objectStore(a.name).index(d),b()});c=a}return this.storindex=c,b()},setRange:function(){if(!this._isRangeNeeded())return null;var a,b,c=this.ranges,d=this.storindex.keyPath,e={lower:[],upper:[]};if(1===Object.keys(c).length)return this._range=c[d];for(var f=0;f<d.length;f++)a=d[f],b=c[a],this._addBoundFilter(a,b),e.lower.push(b.lower),e.upper.push(b.upper);return this._range=k.bound(e.lower,e.upper)},_addBoundFilter:function(a,b){var c;b.upper,b.lower,b.lowerOpen&&(c=g(a,b.lower),this.filters.push(c)),b.upperOpen&&(c=g(a,b.upper),this.filters.push(c))},run:function(a){var b=this;return a&&(this.cursorDirection=a),i(this.dbName,this.storeName,function(a){return b.setStorindex(a,function(){return b.setRange(),b._runCursor()})})},_runCursor:function(){var a,b=this.cursorDirection,c=this.getOne,d=this._range,e=this.filters,f=[];return this.storindex.openCursor(d,b,function(b,d){if(b){var g=b.value;e.length>0?(a=e.every(function(a){return a(g)}),a&&f.push(g)):f.push(g),c&&f.length>0?d(f[0]):b.continue()}else d(f)})},first:function(){return this.getOne=!0,this.run()},last:function(){return this.getOne=!0,this.run("prev")}},n.prototype.equal=n.prototype.eq,c.find=h}),a("eidb/hook",["eidb/promise","exports"],function(a,b){"use strict";function c(a,b){var c;return e=g.call(arguments,2),d(a+".before"),c=b.apply(b,e),d(a+".after"),c}function d(a){c.trigger(a,{args:e})}var e,f=a.RSVP,g=Array.prototype.slice;f.EventTarget.mixin(c),c.addHook=function(a,b){c.on(a,function(a){b.apply(b,a.args)})},c.triggerHandler=function(a){return function(b){c.trigger(a,b)}},b.hook=c}),a("eidb/index",["eidb/promise","eidb/utils","exports"],function(a,b,c){"use strict";a.Promise;var d=b._request,e=b._openCursor,f=b._getAll,g=b._hasKeyPath,h=function(a,b){this._idbIndex=a,this.name=a.name,this.objectStore=b,this.keyPath=a.keyPath,this.multiEntry=a.multiEntry,this.unique=a.unique};h.prototype={_idbIndex:null,name:null,objectStore:null,keyPath:null,multiEntry:null,unique:null,openCursor:function(a,b,c){return e(this._idbIndex,a,b,c)},openKeyCursor:function(a,b,c){return e(this._idbIndex,a,b,c,{keyOnly:!0})},get:function(){return d(this._idbIndex,"get",arguments)},getKey:function(){return d(this._idbIndex,"getKey",arguments)},count:function(){return d(this._idbIndex,"count",arguments)},getAll:function(a,b){return f(this._idbIndex,a,b)},hasKeyPath:function(a){return g(this,a)}},c.Index=h}),a("eidb/indexed_db",["exports"],function(a){"use strict";var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.IndexedDB;a.indexedDB=b}),a("eidb/object_store",["eidb/promise","eidb/index","eidb/utils","eidb/error_handling","exports"],function(a,b,c,d,e){"use strict";a.Promise;var f=b.Index,g=c.__instrument__,h=c._request,i=c._openCursor,j=c._getAll,k=c._hasKeyPath,l=d._handleErrors,m=function(a){this._idbObjectStore=a,this.keyPath=a.keyPath,this.indexNames=a.indexNames,this.name=a.name,this.autoIncrement=a.autoIncrement};m.prototype={_idbObjectStore:null,keyPath:null,name:null,autoIncrement:null,add:function(){return h(this._idbObjectStore,"add",arguments)},get:function(){return h(this._idbObjectStore,"get",arguments)},put:function(){return h(this._idbObjectStore,"put",arguments)},"delete":function(){return h(this._idbObjectStore,"delete",arguments)},count:function(){return h(this._idbObjectStore,"count")},clear:function(){return h(this._idbObjectStore,"clear")},openCursor:function(a,b,c){return i(this._idbObjectStore,a,b,c)},getAll:function(a,b){return j(this._idbObjectStore,a,b)},insertWith_key:function(a,b,c,d){var e=this;return c?(b._key=c,d.close(),e[a](b,c)):e.add(b).then(function(a){return b._key=a,g(function(){var c=l(this,arguments,function(){return e._idbObjectStore.transaction.db.transaction(e.name,"readwrite")});if(c){var f=new m(c.objectStore(e.name));return f.put(b,a).then(function(a){return d.close(),a})}return d.close(),!1})})},indexNames:null,index:function(a){return l(this,arguments,function(b){return new f(b._idbObjectStore.index(a),b)})},createIndex:function(a,b,c){var d=this._idbObjectStore,e=l(this,arguments,function(){return d.createIndex(a,b,c)});return this.indexNames=d.indexNames,new f(e,this)},deleteIndex:function(a){var b=this._idbObjectStore,c=l(this,arguments,function(){return b.deleteIndex(a)});return this.indexNames=b.indexNames,c},getIndexes:function(){for(var a,b=[],c=this.indexNames,d=0;d<c.length;d++)a=c[d],b.push(this.index(a));return b},hasKeyPath:function(a){return k(this,a)}},e.ObjectStore=m}),a("eidb/promise",["exports"],function(a){"use strict";var b;window.RSVP?b=window.RSVP:window.Ember&&(b=window.Ember.RSVP);var c=b.Promise;a.Promise=c,a.RSVP=b}),a("eidb/transaction",["eidb/object_store","eidb/error_handling","eidb/hook","exports"],function(a,b,c,d){"use strict";var e=a.ObjectStore,f=b._handleErrors,g=c.hook,h=function(a){this._idbTransaction=a,a.onabort=g.triggerHandler("transaction.onabort"),a.oncomplete=g.triggerHandler("transaction.oncomplete"),a.onerror=g.triggerHandler("transaction.onerror")};h.prototype={_idbTransaction:null,objectStore:function(a){return new e(this._idbTransaction.objectStore(a))},abort:function(){f(this,arguments,function(a){return a._idbTransaction.abort()})}},d.Transaction=h}),a("eidb/utils",["eidb/promise","eidb/error_handling","eidb/hook","exports"],function(a,b,c,d){"use strict";function e(a){return e.setup?e.setup(a):a()}function f(a,b){a&&console.warn(b)}function g(a,b,c){var d=(window.EIDB,c?Array.prototype.slice.call(c):null);return new l(function(e,f){var g=a[b].apply(a,d);g.onsuccess=function(a){n("_request.onsuccess.resolve",e,a.target.result,b,c)},g.onerror=function(a){f(a)}}).then(null,m(a,b,c))}function h(a,b,c,d,e){var f=(window.EIDB,e&&e.keyOnly?"openKeyCursor":"openCursor");return b=b||null,c=c||"next",new l(function(e,g){var h=a[f](b,c);h.onsuccess=function(a){n("_openCursor.onsuccess.resolve",d,a.target.result,e)},h.onerror=function(a){g(a)}}).then(null,m(a,f,[b,c,d,e]))}function i(a,b,c){var d=[];return h(a,b,c,function(a,b){a?(d.push(a.value),a.continue()):b(d)})}function j(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function k(a,b){function c(a){return a===f}var d,e,f,g=a.keyPath;if(!g)return!1;if("string"==typeof g)return g===b;if(!(b instanceof Array))return!1;if(g instanceof Array||(g=j(g)),d=b.every(function(a){return g.some(function(b){return a===b})}),!d)return!1;for(var h=0;h<g.length;h++)if(f=g[h],e=b.some(c),!e)return!1;return!0}var l=a.Promise,m=b._rsvpErrorHandler,n=c.hook;d.__instrument__=e,d._warn=f,d._request=g,d._openCursor=h,d._getAll=i,d._domStringListToArray=j,d._hasKeyPath=k}),a("eidb",["eidb/eidb","eidb/find","eidb/database","eidb/object_store","eidb/transaction","eidb/index","eidb/utils","eidb/error_handling","eidb/hook","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=a.open,l=a._delete,m=a.version,n=a.webkitGetDatabaseNames,o=a.isGetDatabaseNamesSupported,p=a.getDatabaseNames,q=a.openOnly,r=a.bumpVersion,s=a.storeAction,t=a.createObjectStore,u=a.deleteObjectStore,v=a.createIndex,w=a.addRecord,x=a.getRecord,y=a.putRecord,z=a.deleteRecord,A=a.getAll,B=a.getIndexes,C=b.find,D=c.Database,E=d.ObjectStore,F=e.Transaction,G=f.Index,H=g.__instrument__,I=h.ERROR_HANDLING,J=h.ERROR_LOGGING,K=h.error,L=i.hook;j.delete=l,j.on=L.on,j.off=L.off,j.trigger=L.trigger,j._promiseCallbacks=L._promiseCallbacks,j.addHook=L.addHook,j.open=k,j.version=m,j.webkitGetDatabaseNames=n,j.isGetDatabaseNamesSupported=o,j.getDatabaseNames=p,j.openOnly=q,j.bumpVersion=r,j.storeAction=s,j.createObjectStore=t,j.deleteObjectStore=u,j.createIndex=v,j.addRecord=w,j.getRecord=x,j.putRecord=y,j.deleteRecord=z,j.getAll=A,j.Database=D,j.ObjectStore=E,j.Transaction=F,j.Index=G,j.__instrument__=H,j.ERROR_HANDLING=I,j.ERROR_LOGGING=J,j.error=K,j.getIndexes=B,j.find=C}),window.EIDB=b("eidb")}(window);