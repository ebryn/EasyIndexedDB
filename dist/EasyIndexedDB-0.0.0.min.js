!function(){var a,b;!function(){var c={},d={};a=function(a,b,d){c[a]={deps:b,callback:d}},b=function(a){if(d[a])return d[a];d[a]={};var e=c[a];if(!e)throw new Error("Module '"+a+"' not found.");for(var f,g=e.deps,h=e.callback,i=[],j=0,k=g.length;k>j;j++)"exports"===g[j]?i.push(f={}):i.push(b(g[j]));var l=h.apply(this,i);return d[a]=f||l}}(),a("eidb/database",["eidb/indexed_db","eidb/object_store","eidb/transaction","eidb/hook","exports"],function(a,b,c,d,e){"use strict";a.idbDatabase;var f=b.ObjectStore,g=c.Transaction,h=d.hook,i=function(a){this._idbDatabase=a,this.name=a.name,this.version=a.version,this.objectStoreNames=a.objectStoreNames,a.onabort=h.triggerHandler("database.onabort"),a.onerror=h.triggerHandler("database.onerror"),a.onversionchange=h.triggerHandler("database.onversionchange")};i.prototype={_idbDatabase:null,name:null,version:null,objectStoreNames:null,close:function(){return h.try("database.close",this,arguments,function(a){return a._idbDatabase.close()})},createObjectStore:function(a,b){return h.try("database.createObjectStore",this,arguments,function(c){return new f(c._idbDatabase.createObjectStore(a,b))})},deleteObjectStore:function(a){return h.try("database.deleteObjectStore",this,arguments,function(b){return b._idbDatabase.deleteObjectStore(a)})},objectStore:function(a,b){return this.transactionFor(a,b).objectStore(a)},transaction:function(a,b){var c=h.try("database.transaction",this,arguments,function(c){return void 0!==b?c._idbDatabase.transaction(a,b):c._idbDatabase.transaction(a)});return new g(c)},_transactionsMap:null,transactionFor:function(a,b){var c=this;return this._transactionsMap||(this._transactionsMap={}),setTimeout(function(){c._transactionsMap={}},0),this._transactionsMap[a]=this._transactionsMap[a]||this.transaction([a],"readwrite",b)},add:function(a,b,c){var d=this.objectStore(a),e=d.keyPath;return c[e]=b,d.add(c).then(function(){return c})},get:function(a,b){var c=this.objectStore(a);return c.get(b)},put:function(a,b,c){var d=this.objectStore(a),e=d.keyPath;return c[e]=b,d.put(c)},"delete":function(a,b){return this.objectStore(a).delete(b)},hasObjectStore:function(a){return this.objectStoreNames.contains(a)}},e.Database=i}),a("eidb/eidb",["eidb/indexed_db","eidb/promise","eidb/database","eidb/utils","eidb/hook","exports"],function(a,b,c,d,e,f){"use strict";function g(a,b,c,d){return new z(function(e,f){var g=(window.EIDB,Date.now()),h=b?y.open(a,b):y.open(a);h.onsuccess=function(){var a=new B(h.result);E("open.onsuccess.resolve",e,a,g),(!d||d&&!d.keepOpen)&&setTimeout(function(){a.close()},0)},h.onerror=function(a){f(a)},h.onupgradeneeded=function(a){var b=new B(h.result),e=d&&d.returnEvent?{db:b,event:a}:b;c&&E("open.onupgradeneeded.callback",c,e)}}).then(null,E.rsvpErrorHandler("open.promise.error",y,"open",arguments))}function h(){return D(y,"deleteDatabase",arguments)}function i(a){return l(a).then(function(a){return a?a.version:null})}function j(){return D(y,"webkitGetDatabaseNames")}function k(){return F?j():(C(!0,"EIDB.getDatabaseNames is currently only supported in Chrome"),A.resolve([]))}function l(a,b,c,d){return F?k().then(function(e){return e.contains(a)&&!b?g(a,b,c,d):e.contains(a)&&b?g(a).then(function(e){return e.version>=b?g(a,b,c,d):null}):null}):(C(!0,"EIDB.openOnly acts like .open in non-supported browsers"),g(a,b,c,d))}function m(a,b,c){var d=arguments;return a?g(a).then(function(e){return g(a,e.version+1,function(a){b&&E.try("bumpVersion",e,d,function(){b(a)})},c)}):A.resolve(null)}function n(a,b,c){var d=c?c:{autoIncrement:!0};return m(a,function(a){a.createObjectStore(b,d)})}function o(a,b){return m(a,function(a){a.deleteObjectStore(b)})}function p(a,b,c,d,e){return m(a,function(a){var f=a.event.target.transaction.objectStore(b);f.createIndex(c,d,e)},{returnEvent:!0})}function q(a,b,c,d){var e;return g(a,null,null,d).then(function(a){e=a;var f=e.objectStore(b,d);return d&&d.keepOpen?c(f,e):c(f)}).then(null,E.rsvpErrorHandler("storeAction.promise.error",e,"storeAction",arguments))}function r(a,b,c,d,e){return q(a,b,function(a,b){return c instanceof Array?A.all(c.map(function(c,f){return!a.keyPath&&d instanceof Array?a.insertWith_key(e,c,d[f],b):a.keyPath?(b.close(),a[e](c)):a.insertWith_key(e,c,null,b)})):a.keyPath?(b.close(),a[e](c,d)):a.insertWith_key(e,c,d,b)},{keepOpen:!0})}function s(a,b,c,d){return r(a,b,c,d,"add")}function t(a,b,c,d){return r(a,b,c,d,"put")}function u(a,b,c){return q(a,b,function(a){return a.get(c)})}function v(a,b,c){return q(a,b,function(a){return a.delete(c)})}function w(a,b,c,d){return q(a,b,function(a){return a.getAll(c,d)})}function x(a,b){return q(a,b,function(a){return a.getIndexes()})}var y=a.indexedDB,z=b.Promise,A=b.RSVP,B=c.Database,C=d._warn,D=d._request;d.__instrument__;var E=e.hook,F=function(){return"webkitGetDatabaseNames"in y}();f.open=g,f._delete=h,f.openOnly=l,f.bumpVersion=m,f.version=i,f.webkitGetDatabaseNames=j,f.isGetDatabaseNamesSupported=F,f.getDatabaseNames=k,f.createObjectStore=n,f.deleteObjectStore=o,f.createIndex=p,f.addRecord=s,f.getRecord=u,f.putRecord=t,f.deleteRecord=v,f.getAll=w,f.getIndexes=x,f.storeAction=q}),a("eidb/find",["eidb/eidb","exports"],function(a,b){"use strict";function c(a,b){return i.bound(a.lower,b.upper,a.lowerOpen,b.upperOpen)}function d(a,b){var d,e,f,g={},h={},i={};for(d in a)i[d]=a[d];for(d in b)if(e=a[d],f=b[d],e&&f){h=e.lower>f.lower?e:f,g=e.upper<f.upper?e:f;try{i[d]=c(h,g)}catch(j){i[d]=void 0}}else i[d]=b[d];return i}function e(a){if(1===a.length)return a[0];var b={};return b[a[0]]=a[1],b}function f(a,b){return function(c){return c[a]===b?!1:!0}}function g(a,b,c){var d=new l(a,b);return c?d.equal(c).run():d}var h=a.storeAction,i=window.IDBKeyRange,j={eq:function(a){return i.only(a)},gt:function(a){var b=k.upper[typeof a];return i.bound(a,b,!0)},gte:function(a){var b=k.upper[typeof a];return i.bound(a,b)},lt:function(a){var b=k.lower[typeof a];return i.bound(b,a,!1,!0)},lte:function(a){var b=k.lower[typeof a];return i.bound(b,a)}},k={lower:{string:String.fromCharCode(0),number:-1/0},upper:{string:String.fromCharCode(65535),number:1/0}},l=function(a,b){this.dbName=a,this.storeName=b,this.filters=[],this.ranges={},this.rangeFilters=[]};l.prototype={storindex:null,_range:null,getOne:!1,cursorDirection:"next",_addRanges:function(a,b){var c={},f=e(b);for(var g in f)c[g]=j[a](f[g]);this.ranges=d(this.ranges,c)},eq:function(){return this._addRanges("eq",arguments),this},gt:function(){return this._addRanges("gt",arguments),this},gte:function(){return this._addRanges("gte",arguments),this},lt:function(){return this._addRanges("lt",arguments),this},lte:function(){return this._addRanges("lte",arguments),this},range:function(){var a=e(arguments),b=Object.keys(a)[0];return this.gte(b,a[b][0]),this.lte(b,a[b][1]),this},filter:function(a){return this.filters.push(a),this},match:function(a,b){return this.filter(function(c){return b.test(c[a])})},_isRangeNeeded:function(){return Object.keys(this.ranges).length>0},_setStorindex:function(a,b){var c,d,e=this,f=Object.keys(this.ranges),g=1===f.length?f[0]:f;if(a.getIndexes().forEach(function(a){a.hasKeyPath(g)&&(c=a)},this),!c){if(this._isRangeNeeded()&&!a.hasKeyPath(g))return f.sort(),d=f.join("_"),g=1===f.length?f[0]:f,window.EIDB.createIndex(this.dbName,a.name,d,g).then(function(c){return e.storindex=c.objectStore(a.name).index(d),b()});c=a}return this.storindex=c,b()},_setRange:function(){if(!this._isRangeNeeded())return null;var a,b,c=this.ranges,d=this.storindex.keyPath,e={lower:[],upper:[]};if(1===Object.keys(c).length)return this._range=c[d];for(var f=0;f<d.length;f++)a=d[f],b=c[a],this._addBoundFilter(a,b),e.lower.push(b.lower),e.upper.push(b.upper);return this._range=i.bound(e.lower,e.upper)},_addBoundFilter:function(a,b){var c;b.upper,b.lower,b.lowerOpen&&(c=f(a,b.lower),this.filters.push(c)),b.upperOpen&&(c=f(a,b.upper),this.filters.push(c))},run:function(a){var b=this;return a&&(this.cursorDirection=a),h(this.dbName,this.storeName,function(a){return b._setStorindex(a,function(){return b._setRange(),void 0===b._range?[]:b._runCursor()})})},_runCursor:function(){var a,b=this.cursorDirection,c=this.getOne,d=this._range,e=this.filters,f=[];return this.storindex.openCursor(d,b,function(b,d){if(b){var g=b.value;e.length>0?(a=e.every(function(a){return a(g)}),a&&f.push(g)):f.push(g),c&&f.length>0?d(f[0]):b.continue()}else d(f)})},first:function(){return this.getOne=!0,this.run()},last:function(){return this.getOne=!0,this.run("prev")}},l.prototype.equal=l.prototype.eq,b.find=g}),a("eidb/hook",["eidb/promise","exports"],function(a,b){"use strict";function c(a,b){var c;return i=k.call(arguments,2),d(a+".before"),c=b.apply(b,i),d(a+".after"),c}function d(a){c.trigger(a,{methodArgs:i})}function e(a){var b,c=window.EIDB.ERROR_HANDLING;window.EIDB.ERROR_HANDLING=!1;try{return b=a(),window.EIDB.ERROR_HANDLING=c,b}catch(d){throw window.EIDB.ERROR_HANDLING=c,"error getting plugin object store"}}function f(a,b,c){return function(){return window.EIDB.open(a).then(function(a){var d=e(function(){return a.objectStore(b)});return d.put(c)})}}function g(a,b,c){return function(){return window.EIDB.createObjectStore(a,b,c)}}function h(a,b,c){return window.EIDB.open(a).then(function(a){var d=e(function(){return a.objectStore(b)});return d.delete(c)})}var i,j=a.RSVP,k=Array.prototype.slice,l=!1;j.EventTarget.mixin(c),c.addHook=function(a,b){c.on(a,function(a){b.apply(b,a.methodArgs)})},c.triggerHandler=function(a){return function(b){c.trigger(a,b)}},c.rsvpErrorHandler=function(a){var b=k.call(arguments,1);return function(d){var e=window.EIDB.ERROR_CATCHING;if(c.trigger(a,{error:d,eidbInfo:b}),!e)throw d}},c.try=function(a,b,d,e){var f,g=k.call(arguments,1),h=window.EIDB.ERROR_CATCHING;try{return f=e(b),c.trigger(a+".success",f),f}catch(i){if(c.trigger(a+".error",{error:i,eidbInfo:g}),h)return!1;throw i}},c.addFactory=function(a,b,c,d){var e=a.dbName,h=a.storeName,i=a.storeOpts;return d=d||function(){},function(){var a=arguments,j=b(a);j&&f(e,h,j)().then(null,g(e,h,i)).then(f(e,h,j)).then(c(a)).then(null,d)}},c.deleteFactory=function(a,b,c,d){var e=a.dbName,f=a.storeName;return function(){var a=Array.prototype.slice.call(arguments)[1],g=b(a);g&&h(e,f,g).then(c(a)).then(null,d(g))}},b.hook=c,b.ERROR_CATCHING=l}),a("eidb/index",["eidb/promise","eidb/utils","exports"],function(a,b,c){"use strict";a.Promise;var d=b._request,e=b._openCursor,f=b._getAll,g=b._hasKeyPath,h=function(a,b){this._idbIndex=a,this.name=a.name,this.objectStore=b,this.keyPath=a.keyPath,this.multiEntry=a.multiEntry,this.unique=a.unique};h.prototype={_idbIndex:null,name:null,objectStore:null,keyPath:null,multiEntry:null,unique:null,openCursor:function(a,b,c){return e(this._idbIndex,a,b,c)},openKeyCursor:function(a,b,c){return e(this._idbIndex,a,b,c,{keyOnly:!0})},get:function(){return d(this._idbIndex,"get",arguments)},getKey:function(){return d(this._idbIndex,"getKey",arguments)},count:function(){return d(this._idbIndex,"count",arguments)},getAll:function(a,b){return f(this._idbIndex,a,b)},hasKeyPath:function(a){return g(this,a)}},c.Index=h}),a("eidb/indexed_db",["exports"],function(a){"use strict";var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.IndexedDB;a.indexedDB=b}),a("eidb/logger",["eidb/hook","exports"],function(a,b){"use strict";function c(a){var b=window.EIDB.LOGGING;return b&&(b[a]||b.all)}var d=a.hook,e=d.trigger,f={};d.trigger=function(a,b){var c={eventName:a,payload:b};e.call(d,"event.trigger",c),e.call(d,a,b)},d.on("event.trigger",function(a){c("events")&&console.log({name:a.eventName,payload:a.payload})}),d.on("_request.onsuccess.resolve.before",function(a){if(c("requests")){var b,d=a.methodArgs[1],e=d[0],f=d[1],g=Date.now()-a.methodArgs[2];b={method:f,args:d[2]&&d[2][0],duration:g},e.name&&(b.storeName=e.name),console.log(b)}}),d.on("_openCursor.onsuccess.resolve.before",function(a){if(c("cursors")){var b=a.methodArgs,d={cursor:b[0],duration:Date.now()-b[2]};console.log(d)}}),d.on("open.onsuccess.resolve.before",function(a){if(c("opens")){var b=a.methodArgs,d={db:b[0],duration:Date.now()-b[1]};console.log(d)}}),b.LOGGING=f}),a("eidb/object_store",["eidb/promise","eidb/index","eidb/utils","eidb/hook","exports"],function(a,b,c,d,e){"use strict";a.Promise;var f=b.Index,g=c.__instrument__,h=c._request,i=c._openCursor,j=c._getAll,k=c._hasKeyPath,l=d.hook,m=function(a){this._idbObjectStore=a,this.keyPath=a.keyPath,this.indexNames=a.indexNames,this.name=a.name,this.autoIncrement=a.autoIncrement};m.prototype={_idbObjectStore:null,keyPath:null,name:null,autoIncrement:null,add:function(){return h(this._idbObjectStore,"add",arguments)},get:function(){return h(this._idbObjectStore,"get",arguments)},put:function(){return h(this._idbObjectStore,"put",arguments)},"delete":function(){return h(this._idbObjectStore,"delete",arguments)},count:function(){return h(this._idbObjectStore,"count")},clear:function(){return h(this._idbObjectStore,"clear")},openCursor:function(a,b,c){return i(this._idbObjectStore,a,b,c)},getAll:function(a,b){return j(this._idbObjectStore,a,b)},insertWith_key:function(a,b,c,d){var e=this;return c?(b._key=c,d.close(),e[a](b,c)):e.add(b).then(function(a){return b._key=a,g(function(){var c=l.try("objectStore.insertWith_key",e,arguments,function(){return e._idbObjectStore.transaction.db.transaction(e.name,"readwrite")});if(c){var f=new m(c.objectStore(e.name));return f.put(b,a).then(function(a){return d.close(),a})}return d.close(),!1})})},indexNames:null,index:function(a){return l.try("objectStore.index",this,arguments,function(b){return new f(b._idbObjectStore.index(a),b)})},createIndex:function(a,b,c){var d=this._idbObjectStore,e=l.try("objectStore.createIndex",this,arguments,function(){return d.createIndex(a,b,c)});return this.indexNames=d.indexNames,new f(e,this)},deleteIndex:function(a){var b=this._idbObjectStore,c=l.try("objectStore.deleteIndex",this,arguments,function(){return b.deleteIndex(a)});return this.indexNames=b.indexNames,c},getIndexes:function(){for(var a,b=[],c=this.indexNames,d=0;d<c.length;d++)a=c[d],b.push(this.index(a));return b},hasKeyPath:function(a){return k(this,a)}},e.ObjectStore=m}),a("eidb/promise",["exports"],function(a){"use strict";var b;window.RSVP?b=window.RSVP:window.Ember&&(b=window.Ember.RSVP);var c=b.Promise;a.Promise=c,a.RSVP=b}),a("eidb/transaction",["eidb/object_store","eidb/hook","exports"],function(a,b,c){"use strict";var d=a.ObjectStore,e=b.hook,f=function(a){this._idbTransaction=a,a.onabort=e.triggerHandler("transaction.onabort"),a.oncomplete=e.triggerHandler("transaction.oncomplete"),a.onerror=e.triggerHandler("transaction.onerror")};f.prototype={_idbTransaction:null,objectStore:function(a){return new d(this._idbTransaction.objectStore(a))},abort:function(){e.try("transaction.abort",this,arguments,function(a){return a._idbTransaction.abort()})}},c.Transaction=f}),a("eidb/utils",["eidb/promise","eidb/hook","exports"],function(a,b,c){"use strict";function d(a){return d.setup?d.setup(a):a()}function e(a,b){a&&console.warn(b)}function f(a,b,c){var d=(window.EIDB,arguments),e=c?Array.prototype.slice.call(c):null;return new k(function(c,f){var g=Date.now(),h=a[b].apply(a,e);h.onsuccess=function(a){l("_request.onsuccess.resolve",c,a.target.result,d,g)},h.onerror=function(a){f(a)}}).then(null,l.rsvpErrorHandler("_request.promise.error",a,d))}function g(a,b,c,d,e){var f=(window.EIDB,e&&e.keyOnly?"openKeyCursor":"openCursor"),g=arguments;return b=b||null,c=c||"next",new k(function(e,g){var h=Date.now(),i=a[f](b,c);i.onsuccess=function(a){l("_openCursor.onsuccess.resolve",d,a.target.result,e,h)},i.onerror=function(a){g(a)}}).then(null,l.rsvpErrorHandler("_openCursor.promise.error",a,f,g))}function h(a,b,c){var d=[];return g(a,b,c,function(a,b){a?(d.push(a.value),a.continue()):b(d)})}function i(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function j(a,b){function c(a){return a===f}var d,e,f,g=a.keyPath;if(!g)return!1;if("string"==typeof g)return g===b;if(!(b instanceof Array))return!1;if(g instanceof Array||(g=i(g)),d=b.every(function(a){return g.some(function(b){return a===b})}),!d)return!1;for(var h=0;h<g.length;h++)if(f=g[h],e=b.some(c),!e)return!1;return!0}var k=a.Promise,l=b.hook;c.__instrument__=d,c._warn=e,c._request=f,c._openCursor=g,c._getAll=h,c._domStringListToArray=i,c._hasKeyPath=j}),a("eidb",["eidb/eidb","eidb/find","eidb/database","eidb/object_store","eidb/transaction","eidb/index","eidb/utils","eidb/hook","eidb/logger","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=a.open,l=a._delete,m=a.version,n=a.webkitGetDatabaseNames,o=a.isGetDatabaseNamesSupported,p=a.getDatabaseNames,q=a.openOnly,r=a.bumpVersion,s=a.storeAction,t=a.createObjectStore,u=a.deleteObjectStore,v=a.createIndex,w=a.addRecord,x=a.getRecord,y=a.putRecord,z=a.deleteRecord,A=a.getAll,B=a.getIndexes,C=b.find,D=c.Database,E=d.ObjectStore,F=e.Transaction,G=f.Index,H=g.__instrument__,I=h.hook,J=h.ERROR_CATCHING,K=i.LOGGING;j.delete=l,["on","off","trigger"].forEach(function(a){j[a]=function(){I[a].apply(I,arguments)}}),j.open=k,j.version=m,j.webkitGetDatabaseNames=n,j.isGetDatabaseNamesSupported=o,j.getDatabaseNames=p,j.openOnly=q,j.bumpVersion=r,j.storeAction=s,j.createObjectStore=t,j.deleteObjectStore=u,j.createIndex=v,j.addRecord=w,j.getRecord=x,j.putRecord=y,j.deleteRecord=z,j.getAll=A,j.Database=D,j.ObjectStore=E,j.Transaction=F,j.Index=G,j.__instrument__=H,j.getIndexes=B,j.find=C,j.hook=I,j.ERROR_CATCHING=J,j.LOGGING=K}),window.EIDB=b("eidb")}(window);